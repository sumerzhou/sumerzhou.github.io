<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>React项目构建|sumerzhou's blog</title>
    <link href="myblog.css" rel="stylesheet" type="text/css">
    <script src="myblog.js" type="text/javascript"></script>
    <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <style>
        .textBox{
            width: 980px;
            border-radius: 20px;
            position: relative;
            padding: 10px;
            top: 105px;
            line-height: 2em;
        }
        .textBox h2{
            margin-top: 10px;
            text-indent: 2em;
            text-shadow: 2px 2px 1px dodgerblue;
        }
        .textBox h3{
            margin-top: 10px;
            border-bottom:1px solid lightblue;
            box-shadow: 2px 2px 1px black;
        }
        .textBox h4{
            text-shadow: 1px 1px 2px #4F68B0;
        }
        .textBox p{
            text-indent: 2em;
        }
        .textBox li{
            text-indent: 2em;
            list-style: none;
        }
        .textBox pre{
            display: block;
            width: 850px;
            border-left: 1px solid black;
            border-right: 1px solid black;
            box-shadow: 4px 3px 2px black;
            padding-left: 30px;
            position: relative;
            left: -30px;
            font-family: '仿宋';
            background-color: rgb(40,44,52);
            line-height: 1.5;
            font-size: 15px;
            color:white;
            overflow-y: auto;
        }
    </style>
</head>
<body>
<!--header-->
<div class="headerbox">
    <div class="headertop">
        <div class="hdtopbut">
            <a href="http://blog.hungking.cc/" target="_blank"><img src="imgs/sns_blog_off.png"></a>
            <a href="https://www.facebook.com/HoungkingHsi" target="_blank"><img src="imgs/sns_facebook_off.png"></a>
            <a href="http://globalblog.hungking.cc/" target="_blank"><img src="imgs/sns_gBlog_off.png"></a>
            <a href="http://www.linkedin.com/imisslovelove" target="_blank"><img src="imgs/sns_in_off.png"></a>
            <a href="http://www.youtube.com/imisslovelove" target="_blank"><img src="imgs/sns_youTube_off.png"></a>
            <a href="http://www.instagram.com/imisslovelove" target="_blank"><img src="imgs/sns_instagram_off.png"></a>
            <a href="http://story.kakao.com/ch/imisslovelove" target="_blank" style="background: transparent none;"><img src="imgs/sns_kakao_off.png"></a>
            <div class="hdtopbutR">
                <a href="construction.html" style="background-position-x:85px ;">Contact Me</a>
                <a href="construction.html">AboutSite</a>
                <span onclick="ifshow(0)">Language<img src="imgs/btn_globalSite_open.gif"></span>
                <ul id="lag">
                    <li>KOREAN</li><li>CHINESE</li><li>JAPANESE</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="headerbotm">
        <a class="logohome" href="http://www.hungking.cc/company"><img src="imgs/blog.png"></a>
        <ul id="hdbotmUl">
            <li>
                <a href="company.html">WEB前端</a>
                <ul class="ultext1">
                    <li>
                        <a href="">HTML</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Corporate Overview</a></li>
                                <li><a href="">Vision of houngking</a></li>
                                <li><a href="">History of houngking</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">CSS/CSS3</a>
                        <div class="ultext2">
                            <ul>
                                <li><a>Brand Story</a></li>
                                <li><a>CI</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">JavaScript</a>
                        <div class="ultext2">
                            <ul>
                                <li><a>Greetings</a></li>
                                <li><a>CEO's Message</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">Ajax</a>
                        <div class="ultext2">
                            <ul>
                                <li><a>hougking Affiliates</a></li>
                                <li><a>Steel</a></li>
                                <li><a>E&C</a></li>
                                <li><a>Trade</a></li>
                                <li><a>ICT</a></li>
                                <li><a>Energy</a></li>
                                <li><a>Material-Chemistry</a></li>
                                <li><a>Support</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">jQuery</a>
                        <div class="ultext2">
                            <ul>
                                <li><a>Global</a></li>
                                <li><a>Asia</a></li>
                                <li><a>America</a></li>
                                <li><a>Europe&Africa</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </li>
            <li>
                <a href="company.html">Business Ethics</a>
                <ul class="ultext1">
                    <li>
                        <a href="">Code of Ethics</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">CEO Message</a></li>
                                <li><a href="">Ethics Charter</a></li>
                                <li><a href="">Practice Guidelines</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">Major Activities</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Operation of the Ethical Management System</a></li>
                                <li><a href="">Education on Corporate Ethics</a></li>
                                <li><a href="">Unethical Act Prevention System</a></li>
                                <li><a href="">External Activities and Results</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </li>
            <li>
                <a href="company.html">Products/Technology</a>
                <ul class="ultext1">
                    <li>
                        <a href="">Products of hounking</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Hot Rolled Steel</a></li>
                                <li><a href="">Steel Plate</a></li>
                                <li><a href="">Winter Day</a></li>
                                <li><a href="">Gold Rolled Steel</a></li>
                                <li><a href="">Galvanized Steel</a></li>
                                <li><a href="">Electrical Galvanized</a></li>
                                <li><a href="">Electrical Steel</a></li>
                                <li><a href="">Automotive materials</a></li>
                                <li><a href="">Stainless Steel</a></li>
                                <li><a href="">Titanium Product</a></li>
                                <li><a href="">Magnesium Product</a></li>
                                <li><a href="">Aluminum-plated products</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">houngking Technology</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">FINEX Technology</a></li>
                                <li><a href="">Strip Casting</a></li>
                                <li><a href="">Endless Hot Rolling Technology</a></li>
                                <li><a href="">Operation Technology</a></li>
                                <li><a href="">CEM Technology</a></li>
                            </ul>
                        </div>
                    </li>
                    <li style="background-image: none;">
                        <a href="">Production Process</a>
                    </li>
                    <li>
                        <a href="">Sales information</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">e-Sales</a></li>
                                <li><a href="">e-Procurement</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </li>
            <li>
                <a href="company.html">Investor Relations</a>
                <ul class="ultext1">
                    <li style="background-image: none;">
                        <a href="">IR Activeties</a>
                    </li>
                    <li>
                        <a href="">Stock Information</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Stock Price</a></li>
                                <li><a href="">Price Comparision</a></li>
                                <li><a href="">ADR</a></li>
                                <li><a href="">houngking Stock Exchange</a></li>
                                <li><a href="">Economic Trend</a></li>
                                <li><a href="">Shareholders Demographics</a></li>
                                <li><a href="">Dividend</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">Financial Information</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Income Statement</a></li>
                                <li><a href="">Credit Rating</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">IR Archive</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Audit Report</a></li>
                                <li><a href="">Form 20-F</a></li>
                                <li><a href="">Annual Report</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </li>
            <li>
                <a href="company.html">Sustainability</a>
                <ul class="ultext1">
                    <li>
                        <a href="">Sustainability Management System</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Sustainability Management System</a></li>
                                <li><a href="">houngking Subsidiaries CSR Assessment</a></li>
                                <li><a href="">Risk Management</a></li>
                                <li><a href="">Stakeholder</a></li>
                                <li><a href="">Relevant Institutes Activities</a></li>
                            </ul>
                        </div>
                    </li>
                    <li style="background-image: none;">
                        <a href="">Social Responsibility </a>
                    </li>
                    <li>
                        <a href="">Environmental Management </a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Family's Environmental Management</a></li>
                                <li><a href="">Environmental Management</a></li>
                                <li><a href="">Climate change /Energy</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">Customer</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Marketing strategy</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">Employee</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Employee Health / Safety</a></li>
                                <li><a href="">Organizational Culture</a></li>
                                <li><a href="">HR system</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">Report</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Sustainability Report</a></li>
                                <li><a href="">Carbon Report</a></li>
                                <li><a href="">Conflict Minerals Disclosure</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </li>
            <li>
                <a href="company.html">PR Room</a>
                <ul class="ultext1">
                    <li style="background-image: none;">
                        <a href="">News room</a>
                    </li>
                    <li style="background-image: none;">
                        <a href="">News letter</a>
                    </li>
                    <li style="background-image: none;">
                        <a href="">houngking SNS</a>
                    </li>
                    <li>
                        <a href="">PR Archives</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Digital Brochure</a></li>
                                <li><a href="">TV Cormmercials</a></li>
                                <li><a href="">Screen Saver</a></li>
                                <li><a href="">PR Movies</a></li>
                                <li><a href="">Printed Advertisement</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">Download</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Company</a></li>
                                <li><a href="">Products/Technology</a></li>
                                <li><a href="">Investor Relations</a></li>
                                <li><a href="">Sustainability</a></li>
                                <li><a href="">PR Room</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </li>
        </ul>
        <img src="imgs/btn_gnb.png" class="imgbtn" id="imgbtn" onclick="ifshow(1)">
        <img src="imgs/btn_search.png" class="imgbtn2" onclick="ifshow(2)">
        <div class="hdmenu" id="hdmenu">
            <a href="">Open submenu</a>
            <ul class="menutxt1">
                <li>
                    <a href="">Company</a>
                    <ul>
                        <li><a href="">Corporate Overview</a></li>
                        <li><a href="">Brand</a></li>
                        <li><a href="">CEO</a></li>
                        <li><a href="">hounking Affiliates</a></li>
                        <li><a href="">hounking Overseas</a></li>
                    </ul>
                </li>
                <li>
                    <a href="">Business Ethics</a>
                    <ul>
                        <li><a href="">Code of Ethics</a></li>
                        <li><a href="">Major Activities</a></li>
                    </ul>
                </li>
                <li>
                    <a href="">Products/Technology</a>
                    <ul>
                        <li><a href="">Products of houngking</a></li>
                        <li><a href="">hounking Technology</a></li>
                        <li><a href="">Production Process</a></li>
                        <li><a href="">Sales informtion</a></li>
                    </ul>
                </li>
                <li style="padding: 0px;">
                    <a href="">Investor Relations</a>
                    <ul>
                        <li><a href="">IR Activities</a></li>
                        <li><a href="">Stock Information</a></li>
                        <li><a href="">Financial Information</a></li>
                        <li><a href="">IR Archive</a></li>
                    </ul>
                </li>
                <li>
                    <a href="">Sustainability</a>
                    <ul>
                        <li><a href="">Suatainability Management System</a></li>
                        <li><a href="">Social Redponsibility</a></li>
                        <li><a href="">Environmental Management</a></li>
                        <li><a href="">Customer</a></li>
                        <li><a href="">Employee</a></li>
                        <li><a href="">Report</a></li>
                    </ul>
                </li>
                <li>
                    <a href="">PR Room</a>
                    <ul>
                        <li><a href="">Newsroom</a></li>
                        <li><a href="">Newsletter</a></li>
                        <li><a href="">houngking SNS</a></li>
                        <li><a href="">PR Archives</a></li>
                        <li><a href="">Download</a></li>
                    </ul>
                </li>
                <li>
                    <a href="">Contact Us</a>
                    <ul>
                        <li><a href="">Q&A</a></li>
                        <li><a href="">Search</a></li>
                        <li><a href="">Location</a></li>
                        <li><a href="">Sitemap</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</div>
<!--text-->
<div class="textBox">
    <h2>React项目构建--react+ant design</h2>
    <h3>1,React 安装</h3>
    <p>create-react-app是创建 React 应用的一个脚手架，它与其他脚手架不同的一个地方就是将一些复杂工具（比如 webpack,babel）的配置封装了起来，让使用者不用关心这些工具的具体配置，从而降低了工具的使用难度。</p>
    <pre>
    //在命令行中安装 create-react-app 工具
    $ npm install -g create-react-app
    //然后新建一个项目 .工具会自动初始化一个脚手架并安装 React 项目的各种必要依赖
    $ create-react-app first-react</pre>
    <p>create-react-app 自动创建的项目是基于 Webpack + ES6 。</p>
    <p>创建成功后，命令行窗口会出现以下命令提示：</p>
    <img src="imgs/react.png" style="padding-left: 30px;">
    <p>然后根据提示进入项目并npm start启动。此时浏览器会访问 http://localhost:3000/ ，看到 Welcome to React 的界面就算成功了。</p>
    <h4>create-react-app的原理分析:</h4>
    <p>● react-scripts 是一个生成的项目所需要的开发依赖</p>
    <p>一般我们开始创建react web应用程序的时候,要自己通过 npm 或者 yarn 安装项目的全部依赖，再写webpack.config.js,一系列复杂的配置,搭建好开发环境后写src源代码。</p>
    <p>搭建react运行环境，使用 create-react-app 去自动构建你的app程序,你项目所在的文件夹下是没有配置文件的。react-scripts 是唯一的 额外的 构建依赖在你的package.json中，你的运行环境将有每一个你需要用来构建一个现代React app应用程序需要的依赖，和在配置文件中编写的配置代码，react-scripts 都帮你写了，比如：react-scripts帮你自动下载需要的 webpack-dev-server 依赖，然后react-scripts自己写了一个nodejs服务端的脚本代码 start.js来 实例化 WebpackDevServer ，并且运行启动了一个使用 express 的Http服务器，你只需要专心写src源代码就可以了。省去了很多精力。</p>
    <p>我们看项目文件夹下的public/index.html 和src/index.js的源码，在这里我们可以编写项目代码，但是注意 public/index.html 是启动http服务器的首页，src/index.js是编译的入口文件，只能叫index这个名字，改别的名字不行。</p>
    <p>打开 http://localhost:3000/index.html 首页，f12查看 网页源码，你会看到</p>
    <pre>
    &lt;script type="text/javascript" src="/static/js/bundle.js"&gt;&lt;/script&gt; </pre>
    <p>/static/js/bundle.js ,项目里是看不到这个文件路径的，你也没有写配置文件webpack.config.js,http服务器配置,自动代开浏览器窗口，react，es6语法编译，babel-core，webpack，等等这些 你都没下载，配置。这些活，react-scripts 都帮你做了。</p>
    <h5>过程分析:</h5>
    <p>npm run start,执行的是package.json里scripts脚本下的react-scripts start </p>
    <p>打开first-react\node_modules\react-scripts这个文件夹下的bin文件夹下的react-scripts.js文件</p>
    <pre style="height:150px; ">   ......
    switch (script) {
      case 'build':
      case 'eject':
      case 'start':
      case 'test': {
        const result = spawn.sync(
          'node',
          nodeArgs
            .concat(require.resolve('../scripts/' + script))
            .concat(args.slice(scriptIndex + 1)),
          { stdio: 'inherit' }
        );
    ......</pre>
    <p>上面代码中  script 的变量值是 start,所以执行 my-app\node_modules\react-scripts\scripts 文件夹下的  start.js 文件,代码节选重点如下:</p>
    <pre style="height:300px; ">
    var webpack = require('webpack');
    var WebpackDevServer = require('webpack-dev-server');  // 启动http服务器
    var paths = require('../config/paths');  //要编译的文件路径与生成路径等
    var config = require('../config/webpack.config.dev');
    var DEFAULT_PORT = parseInt(process.env.PORT, 10) || 3000; //这就是为什么 端口号 不是8080 而是 3000 的原因，在这里可以改成8080，重新npm run start 生效
    detect(DEFAULT_PORT).then(port => {
      if (port === DEFAULT_PORT) {
        run(port); //这里开始运行
        return;
      }
    ......

    function run(port) {
    // 这里可以设置 http协议, 或者可以在 npm run start 之前 cmd命令窗口中执行 set HTTPS=true&&npm start 改成https 安全协议
      var protocol = process.env.HTTPS === 'true' ? "https" : "http";
      var host = process.env.HOST || 'localhost';
      setupCompiler(host, port, protocol);  // 编译源码 ，生成路径
      runDevServer(host, port, protocol);  //启动 http服务器
    }


    //配置http服务器
    function runDevServer(host, port, protocol) {
      var devServer = new WebpackDevServer(compiler, {
       compress: true,
        clientLogLevel: 'none',
        contentBase: paths.appPublic,   //根据导入的paths 指定应用根目录（即index.html所在目录）
        hot: true,

        publicPath: config.output.publicPath, //根据导入的 config 变量,指定 虚拟目录，自动指向path编译目录（/assets/ => /build/js/）。html中引用js文件时，
                                                 //必须引用此虚拟路径（但实际上引用的是内存中的文件，既不是/build/js/也不是/assets/）。

        quiet: true,


        watchOptions: {
          ignored: /node_modules/
        },
        // Enable HTTPS if the HTTPS environment variable is set to 'true'
        https: protocol === "https",
        host: host
      });
      /**
       * 省略其他代码
       */
        openBrowser(protocol + '://' + host + ':' + port + '/');    // 打开浏览器 向服务器发送请求
      });
    }


    function setupCompiler(host, port, protocol) {

      compiler = webpack(config, handleCompile);  //  根据导入的 config 变量  指向的 webpack.config.dev 配置文件  运行
         /**
       * 省略其他代码
       */
    }</pre>
    <p>start.js 文件代码 中 导入了  my-app\node_modules\react-scripts\config文件夹下的  webpack.config.dev.js 与 paths.js 。</p>
    <p>paths.js 代码节选如下:</p>
    <pre style="height: 200px;">
    var appDirectory = fs.realpathSync(process.cwd());   // 获取npm run start 运行所在的路径
    function resolveApp(relativePath) {
      return path.resolve(appDirectory, relativePath);
    }

    module.exports = {
      appPath: resolveApp('.'),
      ownPath: resolveApp('node_modules/react-scripts'),
      appBuild: resolveApp('build'),
      appPublic: resolveApp('public'),
      appHtml: resolveApp('public/index.html'),   //  这就是  一开始  我们的项目 要使用public/index.html作为 默认首页
                    //  这里写什么文件名，项目中就要使用什么文件名  包括 也要有public文件夹
      appIndexJs: resolveApp('src/index.js'),   //编译的入口文件的文件名  项目中要包括src文件夹
      appPackageJson: resolveApp('package.json'),
      appSrc: resolveApp('src'),
      yarnLockFile: resolveApp('yarn.lock'),
      testsSetup: resolveApp('src/setupTests.js'),
      appNodeModules: resolveApp('node_modules'),
      // this is empty with npm3 but node resolution searches higher anyway:
      ownNodeModules: resolveOwn('node_modules'),
      nodePaths: nodePaths,
      publicUrl: getPublicUrl(resolveApp('package.json')),
      servedPath: getServedPath(resolveApp('package.json'))
    };</pre>
    <p>webpack.config.dev.js  代码节选如下:</p>
    <pre style="height: 200px;">
    var paths = require('./paths'); //也导入了 同文件夹下的 paths.js
    module.exports = {
        entry: [
          require.resolve('react-dev-utils/webpackHotDevClient'),
          require.resolve('./polyfills'), paths.appIndexJs // 编译的入口文件  ],
          output: {
            path: paths.appBuild,
            pathinfo: true,
            filename: 'static/js/bundle.js', // 只是编译后生成的目标文件 ，这就是一开始我们 打开浏览器按f12看到的index.html导入的
            //  <script type="text/javascript" src="/static/js/bundle.js"></script>
            publicPath: publicPath
          },

            /*** 省略其他代码*/
    }</pre>
    <h4>create-react-app使用:</h4>
    <h5>增加样式:</h5>
    <p>react-scripts 通过Autoprefixer 帮css文件自动添加浏览器兼容前缀.例如：</p>
    <pre>
    .App {
      display: flex;
      flex-direction: row;
      align-items: center;
    }</pre>
    <p>变成</p>
    <pre>
    .App {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
          -ms-flex-direction: row;
              flex-direction: row;
      -webkit-box-align: center;
          -ms-flex-align: center;
              align-items: center;
    }</pre>
    <h5>增加CSS预处理器:</h5>
    <p>目录下安装node-sass用来将scss编译成css</p>
    <pre>
    $ npm install node-sass --save-dev</pre>
    <p>打开first-react/package.json,增加以下代码到scripts中</p>
    <pre>
     "scripts": {
    +    "build-css": "node-sass src/ -o src/",
    +    "watch-css": "npm run build-css && node-sass src/ -o src/ --watch",
         "start": "react-scripts start",
         "build": "react-scripts build",
         ......
    }</pre>
    <p>现在可以重新命名first-react/src/App.css to first-react/src/App.scss and 运行 npm run watch-css 。</p>
    <p>或者可以改成:</p>
    <pre>
    "scripts": {
        "build-css": "node-sass src/ -o src/",
        "start": "npm run build-css && react-scripts start",  //先执行 build-css 再执行 react-scripts start
        "build": "react-scripts build",
        "test": "react-scripts test --env=jsdom",
        "eject": "react-scripts eject"
    }</pre>
    <p>直接 npm run start</p>
    <h5>增加 bootstrap:</h5>
    <p>不是一定要React Bootstrap和React 一起使用，但他是流行的库,去整合 bootstrap 和react应用程序，如果你需要他(此次构建的项目中并未使用bootstrap)，你可以通过Create React App整合他，通过以下几个步骤.</p>
    <p>首先安装React Bootstrap and Bootstrap从npm，React Bootstrap 不包括Bootstrap CSS ，所以你需要去安装:</p>
    <pre>
    npm install react-bootstrap --save
    npm install bootstrap@3 --save</pre>
    <p>修改 my-app/src/index.js :</p>
    <pre>
    import React from 'react';
    import ReactDOM from 'react-dom';
    import 'bootstrap/dist/css/bootstrap.css';  // 必须的
    import 'bootstrap/dist/css/bootstrap-theme.css';  //  可选的
    import App from './App';
    import './index.css';
    ReactDOM.render(
      &lt;App /&gt;,
      document.getElementById('root')
    ); </pre>
    <p>修改 my-app/src/App.js</p>
    <pre>
    import React, { Component } from 'react';
    import { Grid, Navbar, Jumbotron, Button } from 'react-bootstrap';

    class App extends Component {
      render() {
        return (
          &lt;div&gt;
            //省略Grid, Navbar, Jumbotron, Button使用代码...
          &lt;/div&gt;
        );
      }
    }
    export default App;</pre>
    
    <h3>2,引入antd:</h3>
    <p>环境:正确安装和配置了 Node.js v6.5 或以上.</p>
    <p>在first-react目录下打开命令行:</p>
    <pre>
        $ npm install --save antd</pre>
    <p>成功安装 antd,并自动写入package.json中的dependencies .</p>
    <h4>Ant Design React兼容性:</h4>
    <p>Ant Design React 支持所有的现代浏览器和 IE9+。对于 IE 系列浏览器，需要提供 es5-shim 和 es6-shim 等 Polyfills 的支持。</p>
    <p>如果使用了 babel，强烈推荐使用 babel-polyfill 和 babel-plugin-transform-runtime 来替代以上两个 shim。</p>

    <h4>按需加载:</h4>
    <p>如果你在开发环境的控制台看到下面的提示，那么你可能使用了 import { Button } from 'antd'; 的写法引入了 antd 下所有的模块，这会影响应用的网络性能。</p>
    <p style="background-color: rgb(255,251,229);">
    You are using a whole package of antd,
    please use https://www.npmjs.com/package/babel-plugin-import to reduce app bundle size.</p>

    <p>下面两种方式都可以只加载用到的组件。</p>
    <p><strong>1,</strong>使用 babel-plugin-import（推荐）</p>
    <pre>
    // .babelrc or babel-loader option
    {
      "plugins": [
        ["import", { "libraryName": "antd", "libraryDirectory": "es", "style": "css" }] // `style: true` 会加载 less 文件
      ]
    }
    //注意：webpack 1 无需设置 libraryDirectory。</pre>
    <p>加入这个插件后,你可以仍然像原先那么写,插件会帮你转换成 antd/lib/xxx 的写法。然后只需从 antd 引入模块即可，无需单独引入样式。</p>
    <pre>
    // babel-plugin-import 会帮助你加载 JS 和 CSS
    import { DatePicker } from 'antd';
    //等同于下面手动引入的方式。</pre>
    <p>另外此插件配合 style 属性可以做到模块样式的按需自动加载。</p>
    <p>注意，babel-plugin-import 的 style 属性除了引入对应组件的样式，也会引入一些必要的全局样式。如果你不需要它们，建议不要使用此属性。你可以 import 'antd/dist/antd.css 手动引入，并覆盖全局样式。</p>
    <h5>babel-plugin-import按需加载配置:</h5>
    <p>此时我们需要对 create-react-app 的默认配置进行自定义，这里我们使用 react-app-rewired （一个对 create-react-app 进行自定义配置的社区解决方案）。</p>
    <p>引入 react-app-rewired 并修改 package.json 里的启动配置。</p>
    <pre>
    $ npm install --save-dev react-app-rewired</pre><br/>
    <pre>
    /* package.json */
    "scripts": {
    -   "start": "react-scripts start",
    +   "start": "react-app-rewired start",
    -   "build": "react-scripts build",
    +   "build": "react-app-rewired build",
    -   "test": "react-scripts test --env=jsdom",
    +   "test": "react-app-rewired test --env=jsdom",
    }</pre>
    <p>然后在项目根目录创建一个 config-overrides.js 用于修改默认配置。</p>
    <pre>
    module.exports = function override(config, env) {
      // do stuff with the webpack config...
      return config;
    };
    // override方法的第一个参数config就是 webpack 的配置，在这个方法里面，我们可以对 config 进行扩展，
    //比如安装其他 loader 或者 plugins，最后再将这个 config 对象返回回去。</pre>
    <p>安装babel-plugin-import并修改 config-overrides.js 文件:</p>
    <pre>
    $ npm install --save-dev babel-plugin-import</pre><br/>
    <pre>
    + const { injectBabelPlugin } = require('react-app-rewired');
      module.exports = function override(config, env) {
    +   config = injectBabelPlugin(['import', { libraryName: 'antd', libraryDirectory: 'es', style: 'css' }], config);
        return config;
      };</pre>
    <p>然后就可使用 import { Button } from 'antd'; 的格式引入模块了。重启 npm start 访问页面，antd 组件的 js 和 css 代码都会按需加载，你在控制台也不会看到这样的警告信息。</p>
    <p><strong>2,</strong>手动引入</p>
    <pre>
    import DatePicker from 'antd/lib/date-picker';  // 加载 JS
    import 'antd/lib/date-picker/style/css';        // 加载 CSS
    // import 'antd/lib/date-picker/style';         // 加载 LESS</pre>


    <h4>webpack自行构建:</h4>
    <p>如果想自己维护工作流，我们推荐使用 webpack 进行构建和调试。</p>
    <p>create-react-app构建的项目中,我们可以通过以下几种方式来修改 webpack 的配置：</p>
    <p>● 项目 eject</p>
    <p>● 替换 react-scripts 包</p>
    <p>● 使用 react-app-rewired</p>
    <p>● scripts 包 + override 组合</p>
    <p>在这个项目中,通过使用 react-app-rewired来修改 webpack 的配置。</p>


    <h3>3,React项目的打包与部署</h3>
    <p>create-react-app是来自于Facebook出品的零配置命令行工具，能够帮你自动创建基于Webpack+ES6的最简易的React项目模板。</p>
    <p>执行npm start命令，打开本地浏览器，输入localhost：3000，就能看到项目的运行效果。此时是开发模式。</p>
    <p>若使用npm run build，代码会被编译到build目录。将整个应用打包发布，自动使用webpack进行压缩与优化。</p>
    <p>在项目路径下，敲npm run buil，就出现了build文件夹，同时终端显示这些文字：</p>
    <pre>
    The project was built assuming it is hosted at the server root.
    To override this,specify the homepage in your package.json.
    For example,add this to build it for GithHub Pages:
        "homepage":"http://myname.github.io/myapp",
    The build folder is ready to be deployed.
    You may server it with a static server:
        npm install -g serve
        serve -s build</pre>
    <p>大致意思是：已经编译好啦。build生成的这些东西要放在服务器root下，可以在pakege.json里，根据绿字里的例子，再重写。</p>
    <p>也能让它充当静态的服务器，敲：npm install -g serve，在敲serve -s build，就可以了。</p>

    <br/>
    <h5>参考文档:</h5>
    <a href="https://www.cnblogs.com/axl234/p/8269018.html" target="_blank">create-react-app的使用及原理分析</a>,<br>
    <a href="https://zhaozhiming.github.io/blog/2018/01/08/create-react-app-override-webpack-config/">如何扩展 Create React App 的 Webpack 配置</a>,<br>
    <a href="https://blog.csdn.net/u011121046/article/details/62444025" target="_blank">React项目的打包与部署到腾讯云</a>,<br>
    <a href="https://www.jianshu.com/p/c0bec50ec385" target="_blank">使用webpack、babel、react、antdesign配置单页面应用开发环境</a>,<br>
    <a href="https://www.cnblogs.com/dadifeihong/p/6443272.html" target="_blank">webpack+babel+ES6+react环境搭建</a>,<br>
    <a href="https://www.cnblogs.com/swaggyC/p/6403451.html">npm和webpack</a>,<br>
    <a href="https://github.com/facebook/create-react-app/blob/master/packages/react-scripts/template/README.md" target="_blank">create-react-app开发流程的官方文档</a>
</div>

</body>
</html>