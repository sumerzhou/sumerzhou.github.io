<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>react-router v4|sumerzhou's blog</title>
    <link href="myblog.css" rel="stylesheet" type="text/css">
    <script src="myblog.js" type="text/javascript"></script>
    <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <style>
        .textBox{
            width: 980px;
            border-radius: 20px;
            position: relative;
            padding: 10px;
            top: 105px;
            line-height: 2em;
        }
        .textBox h2{
            margin-top: 10px;
            text-indent: 2em;
            text-shadow: 2px 2px 1px dodgerblue;
        }
        .textBox h3{
            margin-top: 10px;
            border-bottom:1px solid lightblue;
            box-shadow: 2px 2px 1px black;
        }
        .textBox h4{
            text-shadow: 1px 1px 2px #4F68B0;
        }
        .textBox p{
            text-indent: 2em;
        }
        .textBox li{
            text-indent: 2em;
            list-style: none;
        }
        .textBox pre{
            display: block;
            width: 850px;
            border-left: 1px solid black;
            border-right: 1px solid black;
            box-shadow: 4px 3px 2px black;
            padding-left: 30px;
            position: relative;
            left: -30px;
            font-family: '仿宋';
            background-color: rgb(40,44,52);
            line-height: 1.5;
            font-size: 15px;
            color:white;
            overflow-y: auto;
        }
        .highlight{
            background-color: rgb(255,243,212);
        }
    </style>
</head>
<body>
<!--header-->
<div class="headerbox">
    <div class="headertop">
        <div class="hdtopbut">
            <a href="http://blog.hungking.cc/" target="_blank"><img src="imgs/sns_blog_off.png"></a>
            <a href="https://www.facebook.com/HoungkingHsi" target="_blank"><img src="imgs/sns_facebook_off.png"></a>
            <a href="http://globalblog.hungking.cc/" target="_blank"><img src="imgs/sns_gBlog_off.png"></a>
            <a href="http://www.linkedin.com/imisslovelove" target="_blank"><img src="imgs/sns_in_off.png"></a>
            <a href="http://www.youtube.com/imisslovelove" target="_blank"><img src="imgs/sns_youTube_off.png"></a>
            <a href="http://www.instagram.com/imisslovelove" target="_blank"><img src="imgs/sns_instagram_off.png"></a>
            <a href="http://story.kakao.com/ch/imisslovelove" target="_blank" style="background: transparent none;"><img src="imgs/sns_kakao_off.png"></a>
            <div class="hdtopbutR">
                <a href="construction.html" style="background-position-x:85px ;">Contact Me</a>
                <a href="construction.html">AboutSite</a>
                <span onclick="ifshow(0)">Language<img src="imgs/btn_globalSite_open.gif"></span>
                <ul id="lag">
                    <li>KOREAN</li><li>CHINESE</li><li>JAPANESE</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="headerbotm">
        <a class="logohome" href="http://www.hungking.cc/company"><img src="imgs/blog.png"></a>
        <ul id="hdbotmUl">
            <li>
                <a href="company.html">WEB前端</a>
                <ul class="ultext1">
                    <li>
                        <a href="">HTML</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Corporate Overview</a></li>
                                <li><a href="">Vision of houngking</a></li>
                                <li><a href="">History of houngking</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">CSS/CSS3</a>
                        <div class="ultext2">
                            <ul>
                                <li><a>Brand Story</a></li>
                                <li><a>CI</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">JavaScript</a>
                        <div class="ultext2">
                            <ul>
                                <li><a>Greetings</a></li>
                                <li><a>CEO's Message</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">Ajax</a>
                        <div class="ultext2">
                            <ul>
                                <li><a>hougking Affiliates</a></li>
                                <li><a>Steel</a></li>
                                <li><a>E&C</a></li>
                                <li><a>Trade</a></li>
                                <li><a>ICT</a></li>
                                <li><a>Energy</a></li>
                                <li><a>Material-Chemistry</a></li>
                                <li><a>Support</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">jQuery</a>
                        <div class="ultext2">
                            <ul>
                                <li><a>Global</a></li>
                                <li><a>Asia</a></li>
                                <li><a>America</a></li>
                                <li><a>Europe&Africa</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </li>
            <li>
                <a href="company.html">Business Ethics</a>
                <ul class="ultext1">
                    <li>
                        <a href="">Code of Ethics</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">CEO Message</a></li>
                                <li><a href="">Ethics Charter</a></li>
                                <li><a href="">Practice Guidelines</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">Major Activities</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Operation of the Ethical Management System</a></li>
                                <li><a href="">Education on Corporate Ethics</a></li>
                                <li><a href="">Unethical Act Prevention System</a></li>
                                <li><a href="">External Activities and Results</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </li>
            <li>
                <a href="company.html">Products/Technology</a>
                <ul class="ultext1">
                    <li>
                        <a href="">Products of hounking</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Hot Rolled Steel</a></li>
                                <li><a href="">Steel Plate</a></li>
                                <li><a href="">Winter Day</a></li>
                                <li><a href="">Gold Rolled Steel</a></li>
                                <li><a href="">Galvanized Steel</a></li>
                                <li><a href="">Electrical Galvanized</a></li>
                                <li><a href="">Electrical Steel</a></li>
                                <li><a href="">Automotive materials</a></li>
                                <li><a href="">Stainless Steel</a></li>
                                <li><a href="">Titanium Product</a></li>
                                <li><a href="">Magnesium Product</a></li>
                                <li><a href="">Aluminum-plated products</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">houngking Technology</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">FINEX Technology</a></li>
                                <li><a href="">Strip Casting</a></li>
                                <li><a href="">Endless Hot Rolling Technology</a></li>
                                <li><a href="">Operation Technology</a></li>
                                <li><a href="">CEM Technology</a></li>
                            </ul>
                        </div>
                    </li>
                    <li style="background-image: none;">
                        <a href="">Production Process</a>
                    </li>
                    <li>
                        <a href="">Sales information</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">e-Sales</a></li>
                                <li><a href="">e-Procurement</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </li>
            <li>
                <a href="company.html">Investor Relations</a>
                <ul class="ultext1">
                    <li style="background-image: none;">
                        <a href="">IR Activeties</a>
                    </li>
                    <li>
                        <a href="">Stock Information</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Stock Price</a></li>
                                <li><a href="">Price Comparision</a></li>
                                <li><a href="">ADR</a></li>
                                <li><a href="">houngking Stock Exchange</a></li>
                                <li><a href="">Economic Trend</a></li>
                                <li><a href="">Shareholders Demographics</a></li>
                                <li><a href="">Dividend</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">Financial Information</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Income Statement</a></li>
                                <li><a href="">Credit Rating</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">IR Archive</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Audit Report</a></li>
                                <li><a href="">Form 20-F</a></li>
                                <li><a href="">Annual Report</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </li>
            <li>
                <a href="company.html">Sustainability</a>
                <ul class="ultext1">
                    <li>
                        <a href="">Sustainability Management System</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Sustainability Management System</a></li>
                                <li><a href="">houngking Subsidiaries CSR Assessment</a></li>
                                <li><a href="">Risk Management</a></li>
                                <li><a href="">Stakeholder</a></li>
                                <li><a href="">Relevant Institutes Activities</a></li>
                            </ul>
                        </div>
                    </li>
                    <li style="background-image: none;">
                        <a href="">Social Responsibility </a>
                    </li>
                    <li>
                        <a href="">Environmental Management </a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Family's Environmental Management</a></li>
                                <li><a href="">Environmental Management</a></li>
                                <li><a href="">Climate change /Energy</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">Customer</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Marketing strategy</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">Employee</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Employee Health / Safety</a></li>
                                <li><a href="">Organizational Culture</a></li>
                                <li><a href="">HR system</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">Report</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Sustainability Report</a></li>
                                <li><a href="">Carbon Report</a></li>
                                <li><a href="">Conflict Minerals Disclosure</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </li>
            <li>
                <a href="company.html">PR Room</a>
                <ul class="ultext1">
                    <li style="background-image: none;">
                        <a href="">News room</a>
                    </li>
                    <li style="background-image: none;">
                        <a href="">News letter</a>
                    </li>
                    <li style="background-image: none;">
                        <a href="">houngking SNS</a>
                    </li>
                    <li>
                        <a href="">PR Archives</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Digital Brochure</a></li>
                                <li><a href="">TV Cormmercials</a></li>
                                <li><a href="">Screen Saver</a></li>
                                <li><a href="">PR Movies</a></li>
                                <li><a href="">Printed Advertisement</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">Download</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Company</a></li>
                                <li><a href="">Products/Technology</a></li>
                                <li><a href="">Investor Relations</a></li>
                                <li><a href="">Sustainability</a></li>
                                <li><a href="">PR Room</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </li>
        </ul>
        <img src="imgs/btn_gnb.png" class="imgbtn" id="imgbtn" onclick="ifshow(1)">
        <img src="imgs/btn_search.png" class="imgbtn2" onclick="ifshow(2)">
        <div class="hdmenu" id="hdmenu">
            <a href="">Open submenu</a>
            <ul class="menutxt1">
                <li>
                    <a href="">Company</a>
                    <ul>
                        <li><a href="">Corporate Overview</a></li>
                        <li><a href="">Brand</a></li>
                        <li><a href="">CEO</a></li>
                        <li><a href="">hounking Affiliates</a></li>
                        <li><a href="">hounking Overseas</a></li>
                    </ul>
                </li>
                <li>
                    <a href="">Business Ethics</a>
                    <ul>
                        <li><a href="">Code of Ethics</a></li>
                        <li><a href="">Major Activities</a></li>
                    </ul>
                </li>
                <li>
                    <a href="">Products/Technology</a>
                    <ul>
                        <li><a href="">Products of houngking</a></li>
                        <li><a href="">hounking Technology</a></li>
                        <li><a href="">Production Process</a></li>
                        <li><a href="">Sales informtion</a></li>
                    </ul>
                </li>
                <li style="padding: 0px;">
                    <a href="">Investor Relations</a>
                    <ul>
                        <li><a href="">IR Activities</a></li>
                        <li><a href="">Stock Information</a></li>
                        <li><a href="">Financial Information</a></li>
                        <li><a href="">IR Archive</a></li>
                    </ul>
                </li>
                <li>
                    <a href="">Sustainability</a>
                    <ul>
                        <li><a href="">Suatainability Management System</a></li>
                        <li><a href="">Social Redponsibility</a></li>
                        <li><a href="">Environmental Management</a></li>
                        <li><a href="">Customer</a></li>
                        <li><a href="">Employee</a></li>
                        <li><a href="">Report</a></li>
                    </ul>
                </li>
                <li>
                    <a href="">PR Room</a>
                    <ul>
                        <li><a href="">Newsroom</a></li>
                        <li><a href="">Newsletter</a></li>
                        <li><a href="">houngking SNS</a></li>
                        <li><a href="">PR Archives</a></li>
                        <li><a href="">Download</a></li>
                    </ul>
                </li>
                <li>
                    <a href="">Contact Us</a>
                    <ul>
                        <li><a href="">Q&A</a></li>
                        <li><a href="">Search</a></li>
                        <li><a href="">Location</a></li>
                        <li><a href="">Sitemap</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</div>
<!--text-->
<div class="textBox">
    <h2>react-router v4简介</h2>
    <h3></h3>
    <p>React Router 4.x 本次采用单代码仓库模型架构（monorepo），这意味者这个仓库里面有若干相互独立的包，分别是：</p>
    <p>● react-router :React Router 核心</p>
    <p>● react-router-dom :用于 DOM 绑定的 React Router</p>
    <p>● react-router-native :用于 React Native 的 React Router</p>
    <p>● react-router-redux :React Router 和 Redux 的集成</p>
    <p>● react-router-config :静态路由配置的小助手</p>
    <p>本文主要讨论在 web app 中如何使用使用 React Router 4.x。</p>
    <h4>插件初引入</h4>
    <p>那么react-router和react-router-dom是不是两个都要引用呢？非也，他们两个只要引用一个就行了，不同之处就是后者比前者多出了 &lt;Link&gt; &lt;BrowserRouter&gt; 这样的 DOM 类组件。因此我们只需引用 react-router-dom 这个包就行了。当然，如果搭配 redux ，你还需要使用 react-router-redux。</p>
    <h3>&lt;Router&gt;</h3>
    <p>在React Router 4 中，可以将各种组件及标签放进 &lt;Router&gt;组件中。Router是所有路由组件共用的底层接口，一般我们的应用并不会使用这个接口，而是使用高级的路由：</p>
    <p style="background-color: rgb(247,247,247);">● &lt;BrowserRouter&gt;：使用 HTML5 提供的 history API 来保持 UI 和 URL 的同步；</p>
    <p style="background-color: rgb(247,247,247);">● &lt;HashRouter&gt;：使用 URL 的 hash (例如：window.location.hash) 来保持 UI 和 URL 的同步；</p>
    <p style="background-color: rgb(247,247,247);">● &lt;MemoryRouter&gt;：能在内存保存你 “URL” 的历史纪录(并没有对地址栏读写)；</p>
    <p style="background-color: rgb(247,247,247);">● &lt;NativeRouter&gt;：为使用React Native提供路由支持；</p>
    <p style="background-color: rgb(247,247,247);">● &lt;StaticRouter&gt;：从不会改变地址；</p>
    <p>TIPS：和之前的Router不一样，这里Router组件下只允许存在一个子元素，如存在多个则会报错。</p>
    <p>每个路由器都会创建一个history对象并用其保持追踪当前location,并且在有变化时对网站进行重新渲染。这个history对象保证了React Router提供的其他组件的可用性，所以其他组件必须在router内部渲染。一个React Router组件如果向父级上追溯却找不到router组件，那么这个组件将无法正常工作。</p>
    <p>history是用来兼容不同浏览器或者环境下的历史记录管理的，当我跳转或者点击浏览器的后退按钮时，history就必须记录这些变化，4.0之前版本的react-router将history分为三类:</p>
    <p style="background-color: rgb(247,247,247);">● hashHistory 老版本浏览器的history</p>
    <p style="background-color: rgb(247,247,247);">● browserHistory h5的history</p>
    <p style="background-color: rgb(247,247,247);">● memoryHistory node环境下的history，存储在memory中</p>
    <p>4.0之前版本的react-router针对三者分别实现了createHashHistory、createBrowserHistory和create MemoryHistory三个方法来创建三种情况下的history。到了4.0版本，在react-router-dom中直接将这三种history作了内置，于是我们看到了BrowserRouter、HashRouter、MemoryRouter这三种Router。</p>

    <h3>&lt;Route&gt;</h3>
    <p>Route组件是React Router中主要的结构单元,主要的作用就是当一个location匹配路由的path时，渲染某些UI。</p>
    <pre>示例如下：
    &lt;Router&gt;
      &lt;div&gt;
        &lt;Route exact path="/" component={Home}/&gt;
        &lt;Route path="/news" component={NewsFeed}/&gt;
      &lt;/div&gt;
    &lt;/Router&gt;
    // 如果应用的地址是/,那么相应的UI会类似这个样子：
    &lt;div&gt;
      &lt;Home/&gt;
    &lt;/div&gt;
    // 如果应用的地址是/news,那么相应的UI就会成为这个样子：
    &lt;div&gt;
      &lt;NewsFeed/&gt;
    &lt;/div&gt;</pre>
    <h5>&lt;Route&gt;组件有如下属性：</h5>
    <p style="background-color: rgb(247,247,247);">● path（string）: 路由匹配路径。（没有path属性的Route 总是会 匹配）；</p>
    <p style="background-color: rgb(247,247,247);">● exact（bool）：为true时，则要求路径与location.pathname必须完全匹配；</p>
    <p style="background-color: rgb(247,247,247);">● strict（bool）：true的时候，有结尾斜线的路径只能匹配有斜线的location.pathname；</p>
    <h6>ps：需要注意的是Route的path中冒号":"后的部分相当于通配符，而匹配到的url将会把匹配的部分作为match.param中的属性传递给组件，属性名就是冒号后的字符串。</h6>
    <h4>&lt;Route&gt;是如何渲染？</h4>
    <p>新版的路由为&lt;Route&gt;提供了三种渲染内容的方法：</p>
    <p style="background-color: rgb(247,247,247);">● &lt;Route component&gt;：在地址匹配的时候React的组件才会被渲染，route props也会随着一起被渲染。</p>
    <p style="background-color: rgb(247,247,247);">● &lt;Route render&gt;：这种方式对于内联渲染和包装组件却不引起意料之外的重新挂载特别方便。render返回React element的函数,当匹配成功后调用该函数。该过程与传入component参数类似，并且对于行级渲染与需要向元素传入额外参数的操作会更有用。</p>
    <p style="background-color: rgb(247,247,247);">● &lt;Route children&gt;：与render属性的工作方式基本一样，除了它是不管地址匹配与否都会被调用。children 返回React element的函数。</p>
    <pre>
    &lt;Route path='/page' component={Page} /&gt;
    const extraProps = { color: 'red' }
    &lt;Route path='/page' render={(props) => (
      &lt;Page {...props} data={extraProps}/&gt;
    )}/&gt;
    &lt;Route path='/page' children={(props) => (
      props.match
        ? &lt;Page {...props}/&gt;
        : &lt;EmptyPage {...props}/&gt;
    )}/&gt;</pre>
    <p>通常component参数与render参数被更经常地使用。children参数偶尔会被使用，它更常用在path无法匹配时呈现的'空'状态。</p>
    <p>通过&lt;Route&gt;渲染的元素会被传入一些参数。分别是match对象，当前location对象以及history对象（由router创建）。</p>
    <p><strong>match对象:</strong></p>
    <p>当路由地址匹配成功后，会创建一个含有以下属性的match对象：</p>
    <p>● url ：与当前location路径名所匹配部分</p>
    <p>● path ：路由的地址</p>
    <p>● isExact ：path 是否等于 pathname</p>
    <p>● params ：从path-to-regexp获取的路径中取出的值都被包含在这个对象中,path中包含的一些额外数据</p>
    <p>重点看下render的渲染方式：</p>
    <pre>
    // 行内渲染示例
    &lt;Route path="/home" render={() => &lt;div&gt;Home&lt;/div&gt;}/&gt;
    // 包装/合成
    const FadingRoute = ({ component: Component, ...rest }) => (
      &lt;Route {...rest} render={props => (
        &lt;FadeIn&gt;
          &lt;Component {...props}/&gt;
        &lt;/FadeIn&gt;
      )}/&gt;
    )
    &lt;FadingRoute path="/cool" component={Something}/&gt;</pre>
    <p>TIPS:&lt;Route component&gt;的优先级要比&lt;Route render&gt;高，所以不要在同一个&lt;Route&gt;中同时使用这两个属性。</p>
    <h3>&lt;Link&gt;</h3>
    <p>Link标签可以理解为a标签，点击会改变浏览器Url的hash值，通过Route标签来捕获这个url并返回component属性中定义的组件。</p>
    <h3>包含式路由与exact</h3>
    <p>在之前的版本中，在 Route 中写入的 path，在路由匹配时是独一无二的，而 v4 版本则有了一个包含的关系：如匹配 path="/users" 的路由会匹配 path="/"的路由，在页面中这两个模块会同时进行渲染。因此，v4中多了 exact 关键词，表示只对当前的路由进行匹配。</p>
    <pre>// 当匹配 /users 时，会同时渲染 UsersMenu 和 UsersPage
const PrimaryLayout = () => (
  &lt;div className="primary-layout"&gt;
    &lt;header&gt;
      Our React Router 4 App
      &lt;Route path="/users" component={UsersMenu} /&gt;
    &lt;/header&gt;
    &lt;main&gt;
      &lt;Route path="/" exact component={HomePage} /&gt;
      &lt;Route path="/users" component={UsersPage} /&gt;
    &lt;/main&gt;
  &lt;/div&gt;
)  </pre>
    <h3>独立路由：Switch</h3>
    <p>如果想要只匹配一个路由，除了 exact 属性之外，还可以使用 Swtich 组件。</p>
    <pre>
const PrimaryLayout = () => (
  &lt;div className="primary-layout"&gt;
    &lt;PrimaryHeader /&gt;
    &lt;main&gt;
      &lt;Switch&gt;
        &lt;Route path="/" exact component={HomePage} /&gt;  // 必须加上 exact，要不然 /users 也会匹配到该路由
        &lt;Route path="/users/add" component={UserAddPage} /&gt;
        &lt;Route path="/users" component={UsersPage} /&gt;
        &lt;Redirect to="/" /&gt;
      &lt;/Switch&gt;
    &lt;/main&gt;
  &lt;/div&gt;
)  </pre>
    <p>采用 &lt;Switch&gt;，只有一个路由会被渲染，并且总是渲染第一个匹配到的组件。因此，在第一个路由中，还是需要使用 exact，否则，当我们渲染 '/users' 或 '/users/add' 时，只会显示匹配 '/' 的组件（PS：如果不使用 &lt;Switch&gt;，当我们不使用 exact 时，会渲染匹配的多个组件）。所以，将 '/user/add' 路由放在 '/users' 之前更好，因为后者包含了前者，当然，我们也可以同样使用 exact，这样就可以不用关注顺序了。</p>
    <p>再来说一下 &lt;Redirect&gt; 组件，单独使用时，一旦当路由匹配到的时候，浏览器就会进行重定向跳转；而配合 &lt;Switch&gt; 使用时，只有当没有路由匹配的时候，才会进行重定向。例如，上面的例子，地址栏输入 '/test' 时，则会跳转到 '/'，渲染 HomePage 页面。</p>
    <h3>"Index Routes" 和 "Not Found"</h3>
    <p>在 v4 的版本中废弃了 &lt;IndexRoute&gt;，而改用 &lt;Route exact&gt; 的方式进行代替。如果没有匹配的路由，也可通过 &lt;Redirect&gt; 来进行重定向到默认页面或合理的路径。</p>
    <h3>Match:</h3>
    <h4>通过 match 等对路径进行优化，减少重复性的代码输入：</h4>
    <pre>
const UserSubLayout = ({match}) => (
    &lt;div className="user-sub-layout"&gt;
        &lt;aside&gt;
            &lt;UserNav /&gt;
        &lt;/aside&gt;
        &lt;div className="primary-content"&gt;
            &lt;Switch&gt;
                &lt;Route path={match.path} exact component={BrowseUserTable} /&gt;
                &lt;Route path={`${match.path}/:userId`} component={UserProfilePage} /&gt;
            &lt;/Switch&gt;
        &lt;/div&gt;
    &lt;/div&gt;
)
const UserProfilePage = ({match}) => &lt;UserProfile userId={match.params.userId} /&gt;    </pre>
    <h4>match.path vs match.url:</h4>
    <p>当没有参数的时候，match.path 和 match.url 是一样的，而当有参数的时候，两者就有区别了：</p>
    <p>· match.path：是指写在 &lt;Route&gt; 中的 path 参数；</p>
    <p>· match.url：是指在浏览器中显示的真实 URL。</p>
    <p>强烈建议在写路由路径时使用 match.path，因为使用 match.url 最终会产生不可预料的场景，如下面这个例子：</p>
    <pre>
const UserComments = ({ match }) => {
    console.log(match.params);  // output: {}
    return  &lt;div&gt;UserId: {match.params.userId} &lt;/div&gt;
}
const UserSettings = ({ match }) => {
    console.log(match.params);  // output: {userId: "5"}
    return  &lt;div&gt;UserId: {match.params.userId} &lt;/div&gt;
}
const UserProfilePage = ({ match }) => (
   &lt;div&gt;
    User Profile:
     &lt;Route path={`${match.url}/comments`} component={UserComments} /&gt;
     &lt;Route path={`${match.path}/settings`} component={UserSettings} /&gt;
   &lt;/div&gt;
)
    //当访问 '/users/5/comments' 时渲染 'UserId: undefined'；
    //当访问 '/users/5/settings' 时渲染 'UserId: 5'。</pre>
    <p>为什么会 match.path 能够正常渲染，而使用 match.url 则不能呢？造成这种区别的原因是由于 {${match.url}/comments} 相当于硬编码 {'/users/5/comments'}，在路径中并没有参数，只有一个写死的 5，这样，子模块便无法获取到 match.params 参数，因此，便不能正常渲染。</p>
    <p class="highlight">match.path 可用于构造嵌套的 &lt;Route&gt;，而 match.url 可用于构造嵌套的 &lt;Link&gt;。</p>
    <h4>如何避免 Match 的冲突？</h4>
    <p>考虑这样一种情况：如果我们想要通过 '/users/add' 和 '/users/5/edit' 来对用户进行添加和编辑，但是在前面的例子中，我们知道 users/:userId 已经指向了 UserProfilePage，那按照之前的例子，是否意味着 users/:userId 需要指向一个可以同时实现编辑和预览功能的子页面模块？未必如此，因为 edit 和 profile 共享一个子页面，则可以通过以下方式进行实现：</p>
    <pre>
const UserSubLayout = ({ match }) => (
  &lt;div className="user-sub-layout"&gt;
    &lt;aside&gt;
      &lt;UserNav /&gt;
    &lt;/aside&gt;
    &lt;div className="primary-content"&gt;
      &lt;Switch&gt;
        &lt;Route exact path={props.match.path} component={BrowseUsersPage} /&gt;
        &lt;Route path={`${match.path}/add`} component={AddUserPage} /&gt;
        &lt;Route path={`${match.path}/:userId/edit`} component={EditUserPage} /&gt;
        &lt;Route path={`${match.path}/:userId`} component={UserProfilePage} /&gt;
      &lt;/Switch&gt;
    &lt;/div&gt;
  &lt;/div&gt;
)  </pre>
    <p>将 add 和 edit 页面放在 profile 之前，这样就可以实现按需匹配，如果将 profile 路径放在第一位的话，那么当访问 add 页面时，则会匹配 profile 页面，因为 add 匹配了 :userId。</p>
    <p>还有一种替代方法，可以将 profile 放在第一位：采用正则（path-to-regexp）对路径进行约束，如${match.path}/:userId(\\d+)，这样 :userId 只能为 number 类型，则访问 /users/add 路径时便不会产生冲突。</p>
    
    
    <br/>
    <h5>参考文档:</h5>
    <a href="http://reacttraining.cn/" target="_blank">React Router V4 中文文档</a> ,<br>
    <a href="https://reacttraining.com/react-router/web/guides/quick-start" target="_blank">React Router V4官方文档</a> ,<br>
    <a href="https://www.jianshu.com/p/6a45e2dfc9d9" target="_blank">React Router v4 入坑指南</a> ,<br>
    <a href="https://segmentfault.com/a/1190000010174260" target="_blank">React Router 4 简易入门</a> ,<br>
    <a href="https://www.cnblogs.com/zero7room/p/6908752.html" target="_blank">react-router@4.0 使用和源码解析</a> ,<br>
    <a href="https://blog.csdn.net/sinat_17775997/article/details/69218382" target="_blank">初探 React Router 4.0</a> ,<br>
    <a href="http://www.ruanyifeng.com/blog/2016/05/react_router.html?utm_source=tool.lu" target="_blank">阮一峰React Router 2.x使用教程</a> ,<br>
    <a href="https://www.cnblogs.com/wyaocn/p/5805777.html" target="_blank">深入理解 react-router2.x 路由系统</a>, <br>
    <a href="https://css-tricks.com/react-router-4/" target="_blank"> All About React Router 4 </a>, <br>
    <a href="https://www.jianshu.com/p/bf6b45ce5bcc" target="_blank">React Router 4：痛过之后的豁然开朗</a>
</div>

</body>
</html>
