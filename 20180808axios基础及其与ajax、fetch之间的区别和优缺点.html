<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>axios基础及其与ajax、fetch之间的区别和优缺点|sumerzhou's blog</title>
    <link href="myblog.css" rel="stylesheet" type="text/css">
    <script src="myblog.js" type="text/javascript"></script>
    <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <style>
        .textBox{
            width: 980px;
            border-radius: 20px;
            position: relative;
            padding: 10px;
            top: 105px;
            line-height: 2em;
        }
        .textBox h2{
            margin-top: 10px;
            text-indent: 2em;
            text-shadow: 2px 2px 1px dodgerblue;
        }
        .textBox h3{
            margin-top: 10px;
            border-bottom:1px solid lightblue;
            box-shadow: 2px 2px 1px black;
        }
        .textBox h4{
            text-shadow: 1px 1px 2px #4F68B0;
        }
        .textBox p{
            text-indent: 2em;
        }
        .textBox li{
            text-indent: 2em;
            list-style: none;
        }
        .textBox pre{
            display: block;
            width: 850px;
            border-left: 1px solid black;
            border-right: 1px solid black;
            box-shadow: 4px 3px 2px black;
            padding-left: 30px;
            position: relative;
            left: -30px;
            font-family: '仿宋';
            background-color: rgb(40,44,52);
            line-height: 1.5;
            font-size: 15px;
            color:white;
            overflow-y: auto;
        }
        .highlight{
            background-color: rgb(255,243,212);
        }
    </style>
</head>
<body>
<!--header-->
<div class="headerbox">
    <div class="headertop">
        <div class="hdtopbut">
            <a href="http://blog.hungking.cc/" target="_blank"><img src="imgs/sns_blog_off.png"></a>
            <a href="https://www.facebook.com/HoungkingHsi" target="_blank"><img src="imgs/sns_facebook_off.png"></a>
            <a href="http://globalblog.hungking.cc/" target="_blank"><img src="imgs/sns_gBlog_off.png"></a>
            <a href="http://www.linkedin.com/imisslovelove" target="_blank"><img src="imgs/sns_in_off.png"></a>
            <a href="http://www.youtube.com/imisslovelove" target="_blank"><img src="imgs/sns_youTube_off.png"></a>
            <a href="http://www.instagram.com/imisslovelove" target="_blank"><img src="imgs/sns_instagram_off.png"></a>
            <a href="http://story.kakao.com/ch/imisslovelove" target="_blank" style="background: transparent none;"><img src="imgs/sns_kakao_off.png"></a>
            <div class="hdtopbutR">
                <a href="construction.html" style="background-position-x:85px ;">Contact Me</a>
                <a href="construction.html">AboutSite</a>
                <span onclick="ifshow(0)">Language<img src="imgs/btn_globalSite_open.gif"></span>
                <ul id="lag">
                    <li>KOREAN</li><li>CHINESE</li><li>JAPANESE</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="headerbotm">
        <a class="logohome" href="http://www.hungking.cc/company"><img src="imgs/blog.png"></a>
        <ul id="hdbotmUl">
            <li>
                <a href="company.html">WEB前端</a>
                <ul class="ultext1">
                    <li>
                        <a href="">HTML</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Corporate Overview</a></li>
                                <li><a href="">Vision of houngking</a></li>
                                <li><a href="">History of houngking</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">CSS/CSS3</a>
                        <div class="ultext2">
                            <ul>
                                <li><a>Brand Story</a></li>
                                <li><a>CI</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">JavaScript</a>
                        <div class="ultext2">
                            <ul>
                                <li><a>Greetings</a></li>
                                <li><a>CEO's Message</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">Ajax</a>
                        <div class="ultext2">
                            <ul>
                                <li><a>hougking Affiliates</a></li>
                                <li><a>Steel</a></li>
                                <li><a>E&C</a></li>
                                <li><a>Trade</a></li>
                                <li><a>ICT</a></li>
                                <li><a>Energy</a></li>
                                <li><a>Material-Chemistry</a></li>
                                <li><a>Support</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">jQuery</a>
                        <div class="ultext2">
                            <ul>
                                <li><a>Global</a></li>
                                <li><a>Asia</a></li>
                                <li><a>America</a></li>
                                <li><a>Europe&Africa</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </li>
            <li>
                <a href="company.html">Business Ethics</a>
                <ul class="ultext1">
                    <li>
                        <a href="">Code of Ethics</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">CEO Message</a></li>
                                <li><a href="">Ethics Charter</a></li>
                                <li><a href="">Practice Guidelines</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">Major Activities</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Operation of the Ethical Management System</a></li>
                                <li><a href="">Education on Corporate Ethics</a></li>
                                <li><a href="">Unethical Act Prevention System</a></li>
                                <li><a href="">External Activities and Results</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </li>
            <li>
                <a href="company.html">Products/Technology</a>
                <ul class="ultext1">
                    <li>
                        <a href="">Products of hounking</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Hot Rolled Steel</a></li>
                                <li><a href="">Steel Plate</a></li>
                                <li><a href="">Winter Day</a></li>
                                <li><a href="">Gold Rolled Steel</a></li>
                                <li><a href="">Galvanized Steel</a></li>
                                <li><a href="">Electrical Galvanized</a></li>
                                <li><a href="">Electrical Steel</a></li>
                                <li><a href="">Automotive materials</a></li>
                                <li><a href="">Stainless Steel</a></li>
                                <li><a href="">Titanium Product</a></li>
                                <li><a href="">Magnesium Product</a></li>
                                <li><a href="">Aluminum-plated products</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">houngking Technology</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">FINEX Technology</a></li>
                                <li><a href="">Strip Casting</a></li>
                                <li><a href="">Endless Hot Rolling Technology</a></li>
                                <li><a href="">Operation Technology</a></li>
                                <li><a href="">CEM Technology</a></li>
                            </ul>
                        </div>
                    </li>
                    <li style="background-image: none;">
                        <a href="">Production Process</a>
                    </li>
                    <li>
                        <a href="">Sales information</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">e-Sales</a></li>
                                <li><a href="">e-Procurement</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </li>
            <li>
                <a href="company.html">Investor Relations</a>
                <ul class="ultext1">
                    <li style="background-image: none;">
                        <a href="">IR Activeties</a>
                    </li>
                    <li>
                        <a href="">Stock Information</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Stock Price</a></li>
                                <li><a href="">Price Comparision</a></li>
                                <li><a href="">ADR</a></li>
                                <li><a href="">houngking Stock Exchange</a></li>
                                <li><a href="">Economic Trend</a></li>
                                <li><a href="">Shareholders Demographics</a></li>
                                <li><a href="">Dividend</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">Financial Information</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Income Statement</a></li>
                                <li><a href="">Credit Rating</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">IR Archive</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Audit Report</a></li>
                                <li><a href="">Form 20-F</a></li>
                                <li><a href="">Annual Report</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </li>
            <li>
                <a href="company.html">Sustainability</a>
                <ul class="ultext1">
                    <li>
                        <a href="">Sustainability Management System</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Sustainability Management System</a></li>
                                <li><a href="">houngking Subsidiaries CSR Assessment</a></li>
                                <li><a href="">Risk Management</a></li>
                                <li><a href="">Stakeholder</a></li>
                                <li><a href="">Relevant Institutes Activities</a></li>
                            </ul>
                        </div>
                    </li>
                    <li style="background-image: none;">
                        <a href="">Social Responsibility </a>
                    </li>
                    <li>
                        <a href="">Environmental Management </a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Family's Environmental Management</a></li>
                                <li><a href="">Environmental Management</a></li>
                                <li><a href="">Climate change /Energy</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">Customer</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Marketing strategy</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">Employee</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Employee Health / Safety</a></li>
                                <li><a href="">Organizational Culture</a></li>
                                <li><a href="">HR system</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">Report</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Sustainability Report</a></li>
                                <li><a href="">Carbon Report</a></li>
                                <li><a href="">Conflict Minerals Disclosure</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </li>
            <li>
                <a href="company.html">PR Room</a>
                <ul class="ultext1">
                    <li style="background-image: none;">
                        <a href="">News room</a>
                    </li>
                    <li style="background-image: none;">
                        <a href="">News letter</a>
                    </li>
                    <li style="background-image: none;">
                        <a href="">houngking SNS</a>
                    </li>
                    <li>
                        <a href="">PR Archives</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Digital Brochure</a></li>
                                <li><a href="">TV Cormmercials</a></li>
                                <li><a href="">Screen Saver</a></li>
                                <li><a href="">PR Movies</a></li>
                                <li><a href="">Printed Advertisement</a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="">Download</a>
                        <div class="ultext2">
                            <ul>
                                <li><a href="">Company</a></li>
                                <li><a href="">Products/Technology</a></li>
                                <li><a href="">Investor Relations</a></li>
                                <li><a href="">Sustainability</a></li>
                                <li><a href="">PR Room</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </li>
        </ul>
        <img src="imgs/btn_gnb.png" class="imgbtn" id="imgbtn" onclick="ifshow(1)">
        <img src="imgs/btn_search.png" class="imgbtn2" onclick="ifshow(2)">
        <div class="hdmenu" id="hdmenu">
            <a href="">Open submenu</a>
            <ul class="menutxt1">
                <li>
                    <a href="">Company</a>
                    <ul>
                        <li><a href="">Corporate Overview</a></li>
                        <li><a href="">Brand</a></li>
                        <li><a href="">CEO</a></li>
                        <li><a href="">hounking Affiliates</a></li>
                        <li><a href="">hounking Overseas</a></li>
                    </ul>
                </li>
                <li>
                    <a href="">Business Ethics</a>
                    <ul>
                        <li><a href="">Code of Ethics</a></li>
                        <li><a href="">Major Activities</a></li>
                    </ul>
                </li>
                <li>
                    <a href="">Products/Technology</a>
                    <ul>
                        <li><a href="">Products of houngking</a></li>
                        <li><a href="">hounking Technology</a></li>
                        <li><a href="">Production Process</a></li>
                        <li><a href="">Sales informtion</a></li>
                    </ul>
                </li>
                <li style="padding: 0px;">
                    <a href="">Investor Relations</a>
                    <ul>
                        <li><a href="">IR Activities</a></li>
                        <li><a href="">Stock Information</a></li>
                        <li><a href="">Financial Information</a></li>
                        <li><a href="">IR Archive</a></li>
                    </ul>
                </li>
                <li>
                    <a href="">Sustainability</a>
                    <ul>
                        <li><a href="">Suatainability Management System</a></li>
                        <li><a href="">Social Redponsibility</a></li>
                        <li><a href="">Environmental Management</a></li>
                        <li><a href="">Customer</a></li>
                        <li><a href="">Employee</a></li>
                        <li><a href="">Report</a></li>
                    </ul>
                </li>
                <li>
                    <a href="">PR Room</a>
                    <ul>
                        <li><a href="">Newsroom</a></li>
                        <li><a href="">Newsletter</a></li>
                        <li><a href="">houngking SNS</a></li>
                        <li><a href="">PR Archives</a></li>
                        <li><a href="">Download</a></li>
                    </ul>
                </li>
                <li>
                    <a href="">Contact Us</a>
                    <ul>
                        <li><a href="">Q&A</a></li>
                        <li><a href="">Search</a></li>
                        <li><a href="">Location</a></li>
                        <li><a href="">Sitemap</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</div>
<!--text-->
<div class="textBox">
    <h2>axios基础，及其与ajax、fetch之间的区别和优缺点</h2>
    <h3>1,axios</h3>
    <p>axios(url[, config])方式默认是get请求形式。</p>
    <p>在axios里面，query是用params这个key来传递的。data是req的body。</p>
    <p>请求配置里的responseType默认是json。</p>
    <p>拦截器：在请求或响应被 then 或 catch 处理前拦截它们。</p>

    <h3>2,axios、ajax、fetch之间的区别和优缺点</h3>
    <h4>jQuery ajax </h4>
    <h5>优缺点：</h5>
    <p>· 本身是针对MVC的编程,不符合现在前端MVVM的浪潮</p>
    <p>· 基于原生的XHR开发，XHR本身的架构不清晰，已经有了fetch的替代方案</p>
    <p>· JQuery整个项目太大，单纯使用ajax却要引入整个JQuery非常的不合理（采取个性化打包的方案又不能享受CDN服务）</p>
    <h4>axios</h4>
    <h5>优缺点：</h5>
    <p>· 从 node.js 创建 http 请求</p>
    <p>· 支持 Promise API</p>
    <p>· 客户端支持防止CSRF</p>
    <p>· 提供了一些并发请求的接口（重要，方便了很多的操作）</p>
    <h4>fetch</h4>
    <h5>优缺点：</h5>
    <p>· 符合关注分离，没有将输入、输出和用事件来跟踪的状态混杂在一个对象里</p>
    <p>· 更好更方便的写法</p>
    <p>· 更加底层，提供的API丰富（request, response）</p>
    <p>· 脱离了XHR，是ES规范里新的实现方式</p>
    <p>· fetch默认不会带cookie，需要添加配置项</p>
    <p>· fetch不支持abort，不支持超时控制，使用setTimeout及Promise.reject的实现的超时控制并不能阻止请求过程继续在后台运行，造成了量的浪费</p>
    <p>· fetch没有办法原生监测请求的进度，而XHR可以</p>
    <h4>为什么要用axios?</h4>
    <p>axios 是一个基于Promise 用于浏览器和 nodejs 的 HTTP 客户端，它本身具有以下特征：</p>
    <p>1,从浏览器中创建 XMLHttpRequest</p>
    <p>2,从 node.js 发出 http 请求</p>
    <p>3,支持 Promise API</p>
    <p>4,拦截请求和响应</p>
    <p>5,转换请求和响应数据</p>
    <p>6,取消请求</p>
    <p>7,自动转换JSON数据</p>
    <p>8,客户端支持防止CSRF/XSRF</p>
    
    <h3>3,axios使用中遇到的问题</h3>
    <h4>>> axios发post请求后台接收不到参数</h4>
    <p>在react项目中遇到使用axios发送post请求时(axios.post())前端传数据后端接收不到的情况。</p>
    <p>1. 原因：</p>
    <p>axios 的 headers的 content-type  默认是 “application/json ”，传给后台的格式是这样的：</p>
    <img src="imgs/axios1.png" alt="">
    <p>但是后台接收数据的格式一般是表单格式的，就是formdata的数据格式：</p>
    <img src="imgs/axios2.png" alt="">
    <p>所以这时就出现了一种情况，就是前端提交的数据请求接口没有报错，但是后台就是接收不到没有数据返回。</p>
    <p>传参方式是request payload,参数格式是json，而并非用的是form传参，所以在后台用接收form数据的方式接收参数就接收不到了。</p>
    <p>2, 解决方法：</p>
    <p>a, 传数据之前先把参数转成formdata数据</p>
    <pre>
let data = new FormData()
data.append('id',id)
data.append('name',name)   //把一个一个字段名和值appen进去，有点麻烦    </pre>
    <p>b,改变axios 的 headers的 content-type 的值</p>
    <pre>
1.application/x-www-form-urlencoded （这个是变成JSON字符串格式）
2.multipart/form-data   （这个是formdata格式）
//改变方法,第一种
let ajax=axios.create({     //在新建axios时设置
    baseURL:baseUrl,
    headers:{
        'Content-type': 'multipart/form-data'
    },
})
//第二种
import axios from 'axios';   //在import之后设置
axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';</pre>
    <p>multipart/form-data 也是一种比较常见的post数据格式，我们用表单上传文件时，必须使form表单的enctype属性或者ajax的contentType参数等于multipart/form-data。使用这种编码格式时发送到后台的数据长得像这样子 :</p>
    <img src="imgs/axios4.jpg" alt="" style="height: 200px;">
    <p>不同字段以--boundary开始，接着是内容描述信息，最后是字段具体内容。如果传输的是文件，还要包含文件名和文件类型信息</p>
    <p>c, 三种方式将Request Payload 转为Form Data格式</p>
    <p>1),使用qs（推荐）</p>
    <p> qs 库将 json 对象转化为字符串 (如 {name:'dahuang',age: 11} 转化为 name=dahuang&age=11)。</p>
    <p>首先在你的项目里npm install qs安装qs模块, 然后在需要使用的页面引入一下：</p>
    <pre>import qs from 'qs'</pre>
    <p>引入好了之后，把postData用qs转一下再发送给后台就可以了：</p>
    <pre>
let postData = qs.stringify({
        certificationAccount: that.certificationAccount,
        balance: that.balance
}) </pre>
    <p>这样发送给后台时就是Format Data格式了。</p>
    <p>2),使用URLSearchParams</p>
    <pre>
let postData= new URLSearchParams()
postData.append('certificationAccount',  that.certificationAccount)
postData.append('balance',  that.balance)  //写起来麻烦</pre>
    <p>3),直接使用字符串</p>
    <pre>
let postData = `certificationAccount = ${that.certificationAccount}&balance=${that.balance}`</pre>
    <p>三种方法的原理是一样一样的，都是转化为字符串，但第三种方法当所传的值为null时会被转化为空字符串。</p>

    <h5>3, 为何jQuery.ajax的post提交后台可以接受到数据</h5>
    <p>jQuery的ajax方法和post方法分别发送请求，在后台Servlet进行处理时结果是不一样的</p>
    <p>>> $.ajax方法发送请求时:</p>
    <p>data参数是一个JSON.stringify()处理后的字符串，而不是一个JSON对象; servlet里可以这样使用Gson来解析：new Jsonparser().parse(request.getReader()),但此时是不可用request.getParam(key) 来取值的。</p>
    <p>>> $.post方法来发送请求:</p>
    <p>data参数是一个JSON对象,而不要再用JSON.stringify()处理为字符串了; servlet里结果恰恰相反。</p>
    <p>>> 有什么区别呢？</p>
    <p>在Chrome中调试发现，<span class="highlight">$.ajax发送的请求显示在request payload下面，而使用$.post方法发送的请求显示在form data下面</span>。</p>
    <p>关键就是设置Content-type这个Header为application/x-www-form-urlencoded。</p>
    <p>注意post请求的Content-Type为application/x-www-form-urlencoded，参数是在请求体中，即请求中的Form Data:</p>
    <img src="imgs/axios3.png" alt="">
    <p>ps :使用原生AJAX的POST请求如果不指定请求头RequestHeader，默认使用的Content-Type是text/plain;charset=UTF-8,请求表单参数在RequestPayload中。</p>


    <br/>
    <h5>参考文档:</h5>
    <a href="https://blog.csdn.net/twodogya/article/details/80223508" target="_blank">ajax、axios、fetch之间的详细区别以及优缺点</a>,<br>
    <a href="https://www.kancloud.cn/yunye/axios/234845" target="_blank">Axios中文说明</a>,<br>
    <a href="https://www.cnblogs.com/haqiao/p/10013792.html" target="_blank">axios post请求后台接收不到参数 和 一些配置问题</a>,<br>
    <a href="https://www.cnblogs.com/btgyoyo/p/6141480.html" target="_blank">HTTP请求中的form data和request payload的区别</a>,<br>
    <a href="https://www.cnblogs.com/xuzhudong/p/8487119.html" target="_blank">http协议的Request Payload 和 Form Data 的区别</a>,<br>
</div>

</body>
</html>
